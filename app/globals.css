@tailwind base;
@tailwind components;
@tailwind utilities;

/* Tokens básicos */
:root {
  --bg: 255 255 255;
  --fg: 17 24 39;
}

html, body { height: 100%; }
body {
  color: rgb(var(--fg));
  background: rgb(var(--bg));
}

/* Background helper usado no hero antigo (mantém p/ compatibilidade) */
.bg-hero-grid {
  background-image:
    radial-gradient(rgba(255,255,255,0.08) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,0.06) 1px, transparent 1px);
  background-position: 0 0, 11px 11px;
  background-size: 22px 22px;
}

/* Camada de componentes: nossas classes utilitárias */
@layer components {
  .container { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }

  .card {
    @apply rounded-2xl border border-gray-200 bg-white/90 backdrop-blur-sm overflow-hidden
           dark:border-gray-800 dark:bg-gray-900/80;
    /* sombra custom (não usar via @apply) */
    box-shadow: 0 10px 30px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.06);
  }

  .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition; }
  .btn-ghost {
    @apply btn border border-gray-300/70 hover:bg-gray-900/5
           dark:border-white/10 dark:hover:bg-white/10;
  }
  .btn-primary { @apply btn bg-parana-green text-white hover:brightness-110; }
  .btn-white   { @apply btn bg-white text-parana-green hover:bg-white/90; }

  .input {
    @apply w-full rounded-xl border border-gray-300/80 bg-white py-2.5 px-3 text-sm shadow-sm
           focus:outline-none focus:ring-2 focus:ring-parana-green focus:border-parana-green/40
           dark:bg-gray-900 dark:border-white/10;
  }

  .chip { @apply inline-flex items-center gap-2 rounded-full bg-parana-green/10 text-parana-green px-3 py-1 text-xs font-medium; }
}

/* ===== Site Background (fixo, atrás de tudo) ===== */
.site-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background: #2B4940; /* base */
  /* uma leve textura de pontos */
  background-image:
    radial-gradient(rgba(255,255,255,0.04) 1px, transparent 1.2px);
  background-size: 22px 22px;
  background-position: 0 0;
}

/* camada artística animada */
.site-bg::before,
.site-bg::after {
  content: "";
  position: absolute;
  inset: -10%;
  pointer-events: none;
}

/* === VARIANTE 1: “parana” (gradientes orgânicos com drift) === */
.site-bg--parana::before {
  background:
    radial-gradient(40% 35% at 10% 0%,  #3a6a5c 0%, transparent 60%),
    radial-gradient(45% 40% at 95% 100%, #1f4b40 0%, transparent 60%),
    conic-gradient(from 210deg at 50% 50%, #284c42 0 40%, transparent 40% 100%);
  filter: saturate(1.04);
  animation: bg-drift 38s linear infinite alternate;
  will-change: transform;
  opacity: .9;
}

/* um véu sutil para integrar o grid de pontos com o gradiente */
.site-bg--parana::after {
  background: radial-gradient(60% 45% at 50% 35%, rgba(0,0,0,.18), transparent 70%);
  mix-blend-mode: multiply;
  animation: bg-pulse 18s ease-in-out infinite alternate;
  will-change: opacity, transform;
}

/* === VARIANTE 2: “grid” (grade diagonal estilizada) === */
.site-bg--grid::before {
  background-image:
    linear-gradient(135deg, rgba(255,255,255,0.06) 0.5px, transparent 0.5px),
    linear-gradient(225deg, rgba(255,255,255,0.06) 0.5px, transparent 0.5px);
  background-size: 28px 28px, 28px 28px;
  background-position: 0 0, 14px 14px;
  opacity: .6;
}
.site-bg--grid::after {
  background: radial-gradient(60% 45% at 50% 50%, rgba(0,0,0,.15), transparent 70%);
}

/* === VARIANTE 3: “waves” (ondinhas suaves) === */
.site-bg--waves::before {
  --c1: rgba(255,255,255,.06);
  --c2: rgba(255,255,255,.03);
  background:
    radial-gradient(1200px 1200px at 10% 10%, var(--c1), transparent 60%),
    radial-gradient(900px 900px at 90% 90%, var(--c2), transparent 55%),
    radial-gradient(700px 700px at 70% 20%, var(--c1), transparent 50%);
  animation: bg-drift 30s linear infinite alternate;
}
.site-bg--waves::after {
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 1px,
      transparent 1px,
      transparent 14px
    );
  mask-image: linear-gradient(to bottom, transparent, black 15%, black 85%, transparent);
  opacity: .2;
  animation: bg-slide 14s linear infinite;
}

/* === Animações === */
@keyframes bg-drift {
  from { transform: translate3d(0,0,0) scale(1); }
  to   { transform: translate3d(-1.2%, 1.2%, 0) scale(1.02); }
}
@keyframes bg-pulse {
  from { opacity: .08; transform: scale(1); }
  to   { opacity: .2;  transform: scale(1.03); }
}
@keyframes bg-slide {
  from { transform: translateY(0);   }
  to   { transform: translateY(-22px); }
}

/* Acessibilidade: respeita redução de movimento */
@media (prefers-reduced-motion: reduce) {
  .site-bg::before,
  .site-bg::after { animation: none !important; }
}

/* ----- View Transitions (fallback-friendly) ----- */
@media (prefers-reduced-motion: no-preference) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 350ms;
    animation-timing-function: cubic-bezier(.2,.8,.2,1);
  }

  /* leve fade/zoom */
  ::view-transition-old(root) {
    animation-name: vt-fade-out;
  }
  ::view-transition-new(root) {
    animation-name: vt-fade-in;
  }

  @keyframes vt-fade-in {
    from { opacity: .0; scale: .995; }
    to   { opacity: 1;  scale: 1;    }
  }
  @keyframes vt-fade-out {
    from { opacity: 1;  scale: 1;    }
    to   { opacity: .0; scale: 1.005;}
  }
}

/* ===== View Transitions (global) ===== */
@media (prefers-reduced-motion: no-preference) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 350ms;
    animation-timing-function: cubic-bezier(.2,.8,.2,1);
  }

  ::view-transition-old(root) { animation-name: vt-fade-out; }
  ::view-transition-new(root) { animation-name: vt-fade-in; }

  @keyframes vt-fade-in   { from { opacity: 0;  scale: .995 } to { opacity: 1; scale: 1 } }
  @keyframes vt-fade-out  { from { opacity: 1;  scale: 1 }    to { opacity: 0; scale: 1.005 } }
}

